<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Los Malditos - Controle de Produtos</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      background-color: #1c1c1c;
      color: #eaeaea;
      padding: 20px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
    }
    th, td {
      padding: 8px;
      border: 1px solid #444;
      text-align: center;
    }
    select, input, button {
      background-color: #2c2c2c;
      color: #fff;
      border: 1px solid #666;
      padding: 5px;
      margin: 4px 0;
    }
    #totais {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
    }
    .input-group {
      margin-bottom: 10px;
    }
  </style>
</head>
<body>

  <h1>üì¶ Los Malditos - Controle de Produtos</h1>

  <div class="input-group">
    <label>üßæ N¬∫ do Pedido:</label><br>
    <input type="text" id="numero-pedido" placeholder="Ex: #0456">
  </div>

  <div class="input-group">
    <label>üë§ Vendedor:</label><br>
    <input type="text" id="vendedor" placeholder="Nome do Vendedor">
  </div>

  <div class="input-group">
    <label>üßç Comprador:</label><br>
    <input type="text" id="comprador" placeholder="Nome do Comprador">
  </div>

  <div class="input-group">
    <label>üéÅ Brinde:</label><br>
    <input type="text" id="brinde" placeholder="Ex: 1x Celular">
  </div>

  <label for="mode-selector">üí∞ Modo de Venda:</label>
  <select id="mode-selector">
    <option value="">-- Selecione --</option>
    <option value="limpo">üí∏ Limpo</option>
    <option value="sujo">üßº Sujo</option>
    <option value="limpo-parc">ü§ù Limpo Parceiro</option>
    <option value="sujo-parc">üßΩ Sujo Parceiro</option>
  </select>

  <table>
    <thead>
      <tr>
        <th>Produto</th>
        <th>Limpo</th>
        <th>Sujo</th>
        <th>Limpo Parceiro</th>
        <th>Sujo Parceiro</th>
        <th>Quantidade</th>
      </tr>
    </thead>
    <tbody id="produtos"></tbody>
  </table>

  <div id="totais">Selecione um modo de c√°lculo</div>
  <br>
  <button onclick="enviarResumoManual()">üì§ Enviar para o Discord</button>

  <script>
    const produtos = [
      { nome: "Cart√£o Raro", limpo: 15000, sujo: 12000, limpoParc: 11250, sujoParc: 9000 },
      { nome: "Cart√£o in-Commum", limpo: 20000, sujo: 16000, limpoParc: 15000, sujoParc: 12000 },
      { nome: "Cart√£o Comum", limpo: 30000, sujo: 25000, limpoParc: 22500, sujoParc: 18750 },
      { nome: "Cart√£o Normal", limpo: 45000, sujo: 37500, limpoParc: 41250, sujoParc: 33750 },
      { nome: "Cart√£o Lend√°rio", limpo: 100000, sujo: 80000, limpoParc: 75000, sujoParc: 60000 },
      { nome: "Pendrive", limpo: 9000, sujo: 6000, limpoParc: 7500, sujoParc: 6000 },
      { nome: "Alicate", limpo: 4000, sujo: 3000, limpoParc: 3750, sujoParc: 3000 },
      { nome: "Celular", limpo: 50000, sujo: 40000, limpoParc: 37500, sujoParc: 30000 },
      { nome: "Bloqueador", limpo: 7000, sujo: 6000, limpoParc: 5250, sujoParc: 4500 },
      { nome: "Notebook", limpo: 9000, sujo: 8000, limpoParc: 7500, sujoParc: 6000 },
      { nome: "Ticket", limpo: 2000, sujo: 1500, limpoParc: 1000, sujoParc: 750 },
      { nome: "Lockpick Alum√≠nio", limpo: 3000, sujo: 2500, limpoParc: 2000, sujoParc: 1500 },
      { nome: "Lockpick Cobre", limpo: 4000, sujo: 3000, limpoParc: 2500, sujoParc: 2000 },
      { nome: "note", limpo: 15000, sujo: 12000, limpoParc: 11250, sujoParc: 9000 },
      { nome: "not", limpo: 20000, sujo: 16000, limpoParc: 18000, sujoParc: 15000 },
      { nome: "chip", limpo: 5000, sujo: 4000, limpoParc: 4500, sujoParc: 4000 },
      { nome: "Chip", limpo: 3000, sujo: 2500, limpoParc: 2000, sujoParc: 1500 }
    ];

    const quantidades = new Array(produtos.length).fill(0);
    const seletorModo = document.getElementById("mode-selector");
    const divTotais = document.getElementById("totais");
    const tabelaProdutos = document.getElementById("produtos");
    const webhookURL = "https://discord.com/api/webhooks/1400936108434391132/moZC9CNnNzNQlRfK9pjq8iIIucC7q3f-B0u4-VU40Z6GsW1F90PnYskV6BSvu-rDv03D";

    produtos.forEach((produto, index) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${produto.nome}</td>
        <td>R$ ${produto.limpo}</td>
        <td>R$ ${produto.sujo}</td>
        <td>R$ ${produto.limpoParc}</td>
        <td>R$ ${produto.sujoParc}</td>
        <td><input type="number" min="0" value="0" onchange="atualizaValor(${index}, this.value)"></td>
      `;
      tabelaProdutos.appendChild(tr);
    });

    function atualizaValor(index, quantidade) {
      quantidades[index] = parseInt(quantidade) || 0;
      atualizarTotais();
    }

    function atualizarTotais() {
      const modo = seletorModo.value;
      let total = 0;

      produtos.forEach((produto, i) => {
        const qtd = quantidades[i];
        if (qtd > 0) {
          let valorUnit = 0;
          if (modo === "limpo") valorUnit = produto.limpo;
          else if (modo === "sujo") valorUnit = produto.sujo;
          else if (modo === "limpo-parc") valorUnit = produto.limpoParc;
          else if (modo === "sujo-parc") valorUnit = produto.sujoParc;

          total += valorUnit * qtd;
        }
      });

      const comissao = total * 0.10;
      const totalFinal = total;

divTotais.innerHTML = modo
  ? `<div>üíµ <strong>Valor Total:</strong> R$ ${totalFinal.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</div>
     <div>üí∏ <strong>Comiss√£o (10%):</strong> R$ ${comissao.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}</div>`
  : "Selecione um modo de c√°lculo"; 
    }

    function enviarResumoManual() {
      const modo = seletorModo.value;
      const pedido = document.getElementById("numero-pedido").value || "N/D";
      const vendedor = document.getElementById("vendedor").value || "N/D";
      const comprador = document.getElementById("comprador").value || "N/D";
      const brinde = document.getElementById("brinde").value || "#N/A";

      if (!modo) {
        alert("Selecione um modo de venda.");
        return;
      }

      let total = 0;
      let listaItens = [];

      produtos.forEach((produto, i) => {
        const qtd = quantidades[i];
        if (qtd > 0) {
          let valorUnit = 0;
          if (modo === "limpo") valorUnit = produto.limpo;
          else if (modo === "sujo") valorUnit = produto.sujo;
          else if (modo === "limpo-parc") valorUnit = produto.limpoParc;
          else if (modo === "sujo-parc") valorUnit = produto.sujoParc;

          const subtotal = valorUnit * qtd;
          total += subtotal;
          listaItens.push(`${qtd}x ${produto.nome}`);
        }
      });

      if (listaItens.length === 0) {
        alert("Adicione pelo menos um item ao pedido.");
        return;
      }

      const totalFinal = total;
      const comissao = total * 0.10;

      const mensagem = `üìÑ **Nova Nota!**\n\n` +
        `üßæ **Pedido N¬∫**: ${pedido}\n` +
        `üë®‚Äçüíº **Vendedor**: ${vendedor}\n` +
        `üßë‚Äçüíº **Comprador**: ${comprador}\n` +
        `üì¶ **Itens**: ${listaItens.join(', ')}\n` +
        `üéÅ **Brinde**: ${brinde}\n` +
        `üíµ **Valor**: R$ ${totalFinal.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}\n` +
        `üí∏ **Comiss√£o do Vendedor (10%)**: R$ ${comissao.toLocaleString('pt-BR', { minimumFractionDigits: 2 })}`;

      fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ content: mensagem })
      }).then(() => {
        alert("‚úÖ Pedido enviado com sucesso!");
      }).catch(error => {
        console.error("Erro ao enviar para o Discord:", error);
        alert("‚ùå Erro ao enviar o pedido.");
      });
    }

    seletorModo.addEventListener("change", atualizarTotais);
  </script>
</body>
</html>